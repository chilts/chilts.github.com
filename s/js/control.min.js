var CJS=CJS||{};CJS.start=function(){CJS.init();CJS.findScripts();CJS.downloadScripts();CJS.defer?"undefined"!=typeof document.readyState&&"complete"===document.readyState?CJS.processScripts():CJS.addHandler(window,"load",CJS.processScripts):(alert("Immediate processing is not currently supported."),CJS.processScripts())};
CJS.findScripts=function(){for(var a=document.getElementsByTagName("script"),b=a.length,c=0;c<b;c++){var d=a[c];"text/cjs"===CJS.getAttribute(d,"type")&&"undefined"===typeof d.cjsfound&&(CJS.aScripts[CJS.aScripts.length]=d,d.cjsfound=!0)}};CJS.downloadScripts=function(){for(var a=CJS.aScripts.length,b=0;b<a;b++){var c=CJS.aScripts[b];(c=CJS.getAttribute(c,"data-cjssrc")||CJS.getAttribute(c,"cjssrc"))&&CJS.downloadScript(c)}};
CJS.downloadScript=function(a){CJS.dprint("downloading "+a);CJS.bIE||CJS.bOpera?CJS.downloadScriptImage(a):CJS.downloadScriptObject(a)};CJS.downloadScriptImage=function(a){var b=new Image;b.onload=function(){CJS.onloadCallback(a)};b.onerror=function(){CJS.onloadCallback(a)};b.src=a};
CJS.downloadScriptObject=function(a){if("undefined"===typeof document.body||!document.body)setTimeout("CJS.downloadScriptObject('"+a+"')",50);else{var b=document.createElement("object");b.data=a;b.width=0;b.height=0;b.onload=function(){CJS.onloadCallback(a)};b.onerror=function(){CJS.onloadCallback(a)};document.body.appendChild(b)}};CJS.onloadCallback=function(a){CJS.hLoaded[a]=!0};
CJS.execCallback=function(a){CJS.dprint("execCallback: "+a);0===CJS.aExecs.length?CJS.dprint("ERROR: We finished executing a script but the exec queue is empty: "+a):(a==CJS.aExecs[0][0]?CJS.aExecs.splice(0,1):CJS.dprint("ERROR: We finished executing a script that wasn't on the queue: "+a),CJS.aExecs.length&&CJS.execScript(CJS.aExecs[0][0],CJS.aExecs[0][1]))};CJS.processScripts=function(){CJS.processNextScript()};
CJS.processNextScript=function(){if(CJS.aScripts.length){var a=CJS.aScripts[0];CJS.curScript=a;var b=CJS.getAttribute(a,"data-cjssrc")||CJS.getAttribute(a,"cjssrc"),c=CJS.getAttribute(a,"data-cjsexec")||CJS.getAttribute(a,"cjsexec");b?"false"===c?(CJS.aScripts.splice(0,1),setTimeout(CJS.processNextScript,0)):CJS.hLoaded[b]?(CJS.processExternalScript(a,CJS.processNextScript),CJS.aScripts.splice(0,1)):(CJS.dprint("processNextScript: waiting for script "+b),"undefined"===typeof a.startwait&&(a.startwait=
Number(new Date)),Number(new Date)-a.startwait<CJS.maxWait?setTimeout(CJS.processNextScript,CJS.waitival):alert("There was an error loading script: "+b)):(CJS.processInlineScript(a),CJS.aScripts.splice(0,1),setTimeout(CJS.processNextScript,0))}else CJS.findScripts(),CJS.aScripts.length?(CJS.downloadScripts(),setTimeout(CJS.processNextScript,0)):(document.write=CJS.docwriteOrig,CJS.dprint("DONE processing scripts"))};
CJS.processInlineScript=function(a){CJS.curScript=a;a=a.text;CJS.dprint("processInlineScript: processing script code: "+a.substring(0,64));CJS.eval(a)};CJS.processExternalScript=function(a,b){var c=CJS.getAttribute(a,"data-cjssrc")||CJS.getAttribute(a,"cjssrc");CJS.dprint("processExternalScript: processing script "+c);CJS.execScript(c,b)};
CJS.execScript=function(a,b){CJS.dprint("execScript: "+a);if(0===CJS.aExecs.length)CJS.aExecs[CJS.aExecs.length]=[a,b];else if(a!=CJS.aExecs[0][0]){CJS.dprint("execScript: queueing for later: "+a);CJS.aExecs[CJS.aExecs.length]=[a,b];return}var c=function(a){switch(typeof a){case "string":a=new Function(a);break;case "function":break;default:a=new Function}return a}(b),d=document.createElement("script");d.onload=d.onreadystatechange=function(){if(!this.readyState||!("complete"!=this.readyState&&"loaded"!=
this.readyState))CJS.execCallback(a),this.onload=this.onreadystatechange=null,c()};d.src=a;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)};CJS.eval=function(a){window.execScript?window.execScript(a):window.eval.call(window,a)};
CJS.init=function(){CJS.bInited=!0;CJS.defer="undefined"===typeof CJS.defer?!0:CJS.defer;CJS.aScripts=[];CJS.hLoaded={};CJS.aExecs=[];CJS.bIE=-1!=navigator.userAgent.indexOf("MSIE");CJS.bChrome=-1!=navigator.userAgent.indexOf("Chrome/");CJS.bOpera=-1!=navigator.userAgent.indexOf("Opera");CJS.curScript=null;CJS.maxWait=5E3;CJS.waitival=200;CJS.docwriteOrig=document.write;document.write=CJS.docwrite};CJS.getAttribute=function(a,b){for(var c=a.attributes,d=c.length,e=0;e<d;e++){var f=c[e];if(b===f.nodeName)return f.nodeValue}};
CJS.addHandler=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d?!0:!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]||(a["on"+b]=c)};CJS.dprint="undefined"!=typeof console&&"undefined"!=typeof console.log?function(a){console.log("CJS "+Number(new Date)+": "+a)}:function(){};
CJS.docwrite=function(a){if(CJS.curScript){CJS.curScript.docwriteTarget||(CJS.curScript.docwriteTarget=document.createElement("span"),CJS.curScript.parentNode.insertBefore(CJS.curScript.docwriteTarget,CJS.curScript));var b=a.indexOf("<script");if(-1===b)CJS.dprint("docwrite: "+a.substring(0,64)),CJS.curScript.docwriteTarget.innerHTML+=a;else{var c=a.indexOf("<\/script>",b)+9;if(-1!=c){var d=a.substring(0,b),b=a.substring(b,c),a=a.substring(c+1);d&&(CJS.dprint("docwrite: "+d.substring(0,64)),CJS.curScript.docwriteTarget.innerHTML+=
d+a);CJS.docwriteScript(b)}}}else CJS.dprint("ERROR: There's a problem with the async override of document.write.")};CJS.docwriteScript=function(a){if(a=a.match(/src='([^']*)/i)||a.match(/src="([^"]*)/i)||a.match(/src=([^ >]*)/i)){a=a[1];CJS.dprint("docwriteScript url = "+a);var b=document.createElement("script");b.src=a;document.body.appendChild(b)}};CJS.start();
